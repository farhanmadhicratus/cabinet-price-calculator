<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CRATUS - Cabinet Pricing Calculator</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f4f7fa;
            color: #333;
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.05);
            display: flex;
            justify-content: space-between;
        }
        .form-container {
            flex: 1;
            max-width: 600px;
        }
        .image-container {
            flex: 1;
            margin-left: 40px;
            text-align: center;
        }
        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 40px;
            font-weight: 600;
        }
        label {
            display: block;
            margin-top: 20px;
            font-weight: 500;
            color: #34495e;
        }
        select {
            width: 100%;
            padding: 12px;
            margin-top: 8px;
            border: 1px solid #dcdfe6;
            border-radius: 6px;
            background-color: #fff;
            font-size: 16px;
            color: #606266;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%23606266' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 12px center;
            transition: border-color 0.3s;
        }
        select:focus {
            border-color: #409eff;
            outline: none;
        }
        select:disabled {
            background-color: #f5f7fa;
            cursor: not-allowed;
        }
        #result {
            margin-top: 40px;
            padding: 20px;
            background-color: #e6f7ff;
            border: 1px solid #91d5ff;
            border-radius: 6px;
            text-align: center;
            font-size: 20px;
            font-weight: bold;
            color: #1890ff;
            transition: all 0.3s;
        }
        #result:empty {
            display: none;
        }
        /* Add some hover effects */
        select:hover:not(:disabled) {
            border-color: #a0cfff;
        }
        /* --- Logo positioning fix --- */
        .logo-container {
            position: fixed;
            bottom: 16px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1000;
        }
        .logo-container img {
            width: 120px; /* small size */
            height: auto;
            opacity: 0.9;
        }
    </style>
</head>
<body>
    <div class="form-container">
        <header>
            <h1>CRATUS - Cabinet Pricing Calculator</h1>
        </header>
        
        <label for="cabinetType">Select Cabinet Type:</label>
        <select id="cabinetType">
            <option value="">-- Select --</option>
        </select>
        
        <label for="subvariant">Select Variant:</label>
        <select id="subvariant" disabled>
            <option value="">-- Select Cabinet Type First --</option>
        </select>
        
        <label for="hvac">Select HVAC:</label>
        <select id="hvac" disabled>
            <option value="">-- Select Variant First --</option>
            <option value="DC Aircon">DC Aircon</option>
            <option value="DC Fan">DC Fan</option>
            <option value="Heat Exchanger(HEX)">Heat Exchanger(HEX)</option>
        </select>
        
        <label for="capacity" id="capacityLabel" style="display: none;">Select Capacity:</label>
        <select id="capacity" disabled style="display: none;">
            <option value="">-- Select --</option>
        </select>
        
        <div id="result"></div>
    </div>
    <div id="image-container" class="image-container" style="display:none;">
        <img id="cabinet-image" alt="Cabinet Image" style="max-width:100%; height:auto;">
    </div>
    <div class="logo-container">
        <img src="CRATUS.png" alt="CRATUS by BRILLIANZ GROUP">
    </div>
    <script>
        const majorTypes = [
            {
                name: "Standard Battery Cabinet",
                subvariants: ["400AH", "600AH", "800AH", "1000AH"],
                priceIndicesAir: [2, 3, 4, 5],
                priceIndicesFan: [6, 7, 8, 9]
            },
            {
                name: "Stackable Battery Cabinet",
                subvariants: ["400AH", "600AH", "800AH", "1000AH"],
                priceIndicesAir: [10, 11, 12, 13],
                priceIndicesFan: [10, 11, 12, 13]  // Assuming shared; adjust if separate
            },
            {
                name: "Power Cabinet",
                subvariants: ["Integrated Power Cabinet - Single Door", "Integrated Power Cabinet - Dual Door", "Integrated Power Cabinet- 3 Door"],
                priceIndices: [14, 15, 16]
            },
            {
                name: "FTTH Cabinet",
                subvariants: ["NayaTel", "PTCL", "Super Net"],
                priceIndices: [17, 18, 19]
            },
            {
                name: "IP Router Cabinets",
                subvariants: ["Type 2", "Type 1", "Type 4"],
                priceIndices: [20, 21, 22]
            },
            {
                name: "Server Rack / Switch Rack",
                subvariants: ["42U", "36U", "16U"],
                priceIndices: [23, 24, 25]
            },
            {
                name: "Theft Resistant Cabinet Battery Cabinet",
                subvariants: ["600 AH", "1000AH"],
                priceIndicesAir: [26, 27],
                priceIndicesFan: [28, 29]
            },
            {
                name: "Theft Resistant Cabinet Integrated Cabinet",
                subvariants: ["600AH + Power System"],
                priceIndices: [30]
            }
        ];
        const cabinetPrices = [0, 0, 649.3972085167984, 706.444140659871, 842.3487721414641, 904.5162064459055, 613.452912720912, 653.9760355469771, 758.3445740595532, 814.0646038160726, 574.3082405452681, 799.5388447232442, 567.0721788608079, 952.4451317932323, 850.162840541247, 902.2266481693708, 925.045418903432, 558.9856292096428, 596.6373846432234, 788.4670969298512, 876.2912021231679, NaN, NaN, 558.4743639544001, 516.2545195729538, 363.4868248587571, 1746.7378410438912, 2312.574139976275, 2312.574139976275];
        const airconCapacities = [{ capacity: "300 Watt", price: 305.019 }, { capacity: "600 Watt", price: 446.9267 }, { capacity: "1000 Watt", price: 608.3000000000001 }, { capacity: "1500 Watt", price: 660.44 }, { capacity: "2000 Watt", price: 790.7900000000001 }, { capacity: "3000 Watt", price: 964.5899999999999 }];
        const hexCapacities = [{ capacity: "60W/K", price: 321.53000000000003 }, { capacity: "80W/K", price: 387.574 }, { capacity: "120W/K", price: 469.26 }, { capacity: "180W/K", price: 634.3700000000001 }, { capacity: "200W/K", price: 677.82 }, { capacity: "250w/k", price: 895.0699999999999 }];

        const imageMap = {
            "Standard Battery Cabinet": "Standard Battery Cabinet.png",
            "IP Router Cabinets": "IP Cabinet.png",
            "Server Rack / Switch Rack": "Server Rack.png",
            "Theft Resistant Cabinet Battery Cabinet": "Theft Resistant Cabinets.png",
            "Stackable Battery Cabinet": "Stackable Battery Cabinet.png",


        };

        // Populate cabinet types
        const typeSelect = document.getElementById('cabinetType');
        majorTypes.forEach(type => {
            const option = document.createElement('option');
            option.value = type.name;
            option.textContent = type.name;
            typeSelect.appendChild(option);
        });

        typeSelect.addEventListener('change', () => {
            const selectedTypeName = typeSelect.value;
            const selectedType = majorTypes.find(t => t.name === selectedTypeName);
            const subSelect = document.getElementById('subvariant');
            subSelect.innerHTML = '<option value="">-- Select --</option>';
            if (selectedType) {
                selectedType.subvariants.forEach(sub => {
                    const option = document.createElement('option');
                    option.value = sub;
                    option.textContent = sub;
                    subSelect.appendChild(option);
                });
                subSelect.disabled = false;
            } else {
                subSelect.disabled = true;
            }
            document.getElementById('hvac').disabled = true;
            hideCapacity();

            // Handle image display
            const imageContainer = document.getElementById('image-container');
            const cabinetImg = document.getElementById('cabinet-image');
            imageContainer.style.display = 'none';
            const imagePath = imageMap[selectedTypeName];
            if (imagePath) {
                cabinetImg.src = imagePath;
                cabinetImg.onload = () => {
                    imageContainer.style.display = 'block';
                };
                cabinetImg.onerror = () => {
                    imageContainer.style.display = 'none';
                };
            }

            updateResult();
        });

        document.getElementById('subvariant').addEventListener('change', () => {
            document.getElementById('hvac').disabled = false;
            hideCapacity();
            updateResult();
        });

        document.getElementById('hvac').addEventListener('change', () => {
            const hvac = document.getElementById('hvac').value;
            const capacitySelect = document.getElementById('capacity');
            const capacityLabel = document.getElementById('capacityLabel');
            capacitySelect.innerHTML = '<option value="">-- Select --</option>';
            if (hvac === 'DC Aircon') {
                airconCapacities.forEach(cap => {
                    const option = document.createElement('option');
                    option.value = cap.price;
                    option.textContent = cap.capacity;
                    capacitySelect.appendChild(option);
                });
                showCapacity();
            } else if (hvac === 'Heat Exchanger(HEX)') {
                hexCapacities.forEach(cap => {
                    const option = document.createElement('option');
                    option.value = cap.price;
                    option.textContent = cap.capacity;
                    capacitySelect.appendChild(option);
                });
                showCapacity();
            } else {
                hideCapacity();
            }
            updateResult();
        });

        document.getElementById('capacity').addEventListener('change', updateResult);

        function showCapacity() {
            document.getElementById('capacityLabel').style.display = 'block';
            document.getElementById('capacity').style.display = 'block';
            document.getElementById('capacity').disabled = false;
        }

        function hideCapacity() {
            document.getElementById('capacityLabel').style.display = 'none';
            document.getElementById('capacity').style.display = 'none';
            document.getElementById('capacity').disabled = true;
        }

        function updateResult() {
            const typeName = document.getElementById('cabinetType').value;
            const sub = document.getElementById('subvariant').value;
            const hvac = document.getElementById('hvac').value;
            const capPrice = parseFloat(document.getElementById('capacity').value) || 0;

            if (!typeName || !sub || !hvac) {
                document.getElementById('result').textContent = '';
                return;
            }

            const type = majorTypes.find(t => t.name === typeName);
            const subIndex = type.subvariants.indexOf(sub);

            let cabinetCol;
            if (hvac === 'DC Fan') {
                if (type.priceIndicesFan) {
                    cabinetCol = type.priceIndicesFan[subIndex];
                } else if (type.priceIndicesAir) {
                    cabinetCol = type.priceIndicesAir[subIndex]; // fallback if no fan specific
                } else {
                    cabinetCol = type.priceIndices[subIndex];
                }
                var hvacPrice = 0;
            } else {
                if (type.priceIndicesAir) {
                    cabinetCol = type.priceIndicesAir[subIndex];
                } else {
                    cabinetCol = type.priceIndices ? type.priceIndices[subIndex] : undefined;
                }
                var hvacPrice = capPrice;
            }

            if (cabinetCol === undefined) {
                document.getElementById('result').textContent = 'Error: Invalid selection';
                return;
            }

            const cabinetPrice = cabinetPrices[cabinetCol];
            if (isNaN(cabinetPrice)) {
                document.getElementById('result').textContent = 'Price not available';
                return;
            }
            const total = cabinetPrice + hvacPrice;
            document.getElementById('result').textContent = `Final Price: ${total.toFixed(2)} USD`;
        }
    </script>
</body>
</html>
